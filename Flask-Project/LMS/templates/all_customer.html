{% extends "base.html" %}

{% block content %}
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #4f46e5, #06b6d4); /* Indigo â†’ Cyan */
  }

  .customer-card {
    backdrop-filter: blur(10px);
    background: rgba(255, 255, 255, 0.95);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .customer-card:hover {
    transform: translateY(-4px);
    box-shadow: 0px 10px 20px rgba(0,0,0,0.15);
  }

  .search-input:focus {
    border-color: #4f46e5;
    box-shadow: 0 0 0 2px rgba(79,70,229,0.3);
  }

  .btn {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .btn:hover {
    transform: scale(1.05);
    box-shadow: 0px 6px 12px rgba(0,0,0,0.2);
  }

  /* Table Row Animation */
  tbody tr {
    transition: background 0.2s ease;
  }

  tbody tr:nth-child(even) {
    background-color: #f9fafb; /* subtle stripe */
  }

  tbody tr:hover {
    background-color: #eef2ff; /* light indigo */
  }
</style>

<div class="customer-card relative overflow-x-auto shadow-xl sm:rounded-2xl p-8 mt-10 mx-8">
    <!-- Search Form -->
    <!-- Search and Create Row -->
    <div class="mb-6 flex justify-between items-center">
      <form method="GET" action="/search" class="flex w-3/4 mr-4">
        <input name="query"
             value="{{ request.args.get('query','') }}"
             class="search-input bg-white border px-4 py-2 mr-2 rounded w-full focus:outline-none"
             type="text" placeholder="ðŸ” Search customers by id, name, phone or email...">
        <button type="submit"
            class="btn bg-green-500 px-6 py-2 text-white rounded hover:bg-green-700 cursor-pointer">
          Search
        </button>
      </form>

      <div class="flex items-center space-x-2">
        <a href="{{ url_for('customer_reg') }}" class="btn bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-800">Create</a>

        <!-- Delete All Form (admin only) -->
        <form method="POST" action="{{ url_for('delete_all_customers') }}" onsubmit="return confirm('Are you SURE you want to delete ALL customers? This cannot be undone.');">
          <button type="submit" class="btn bg-red-600 text-white px-4 py-2 rounded hover:bg-red-800">Delete All</button>
        </form>
      </div>
    </div>

    <!-- Customers Table -->
    <table class="w-full text-sm text-left text-gray-700 border rounded-lg overflow-hidden">
        <thead class="text-xs uppercase bg-indigo-100 text-gray-700">
            <tr>
                <th class="px-6 py-3">ID</th>
                <th class="px-6 py-3">Name</th>
                <th class="px-6 py-3">Email</th>
                <th class="px-6 py-3">Mobile</th>
                <th class="px-6 py-3">Gender</th>
                <th class="px-6 py-3">Password</th>
                <th class="px-6 py-3 text-center">Action</th>
            </tr>
        </thead>
        <tbody>
            {% for customer in customers %}
            <tr class="border-b">
                <td class="px-6 py-4">{{ customer.id }}</td>
                <td class="px-6 py-4 font-semibold text-gray-900">{{ customer.name }}</td>
                <td class="px-6 py-4">{{ customer.email }}</td>
                <td class="px-6 py-4">{{ customer.phone }}</td>
                <td class="px-6 py-4">{{ customer.gender }}</td>
                <td class="px-6 py-4 text-gray-500">{{ customer.password }}</td>
                <td class="px-6 py-4 flex justify-center space-x-3">
                    <!-- Update Button -->
                    <a href="{{ url_for('update_customer', id=customer.id) }}"
                       class="btn bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-700 flex items-center space-x-1">
                        <i class="fas fa-edit"></i> <span>Update</span>
                    </a>

                    <!-- Delete Button -->
                    <a href="{{ url_for('delete_customer', id=customer.id) }}"
                       class="btn bg-red-500 text-white px-3 py-1 rounded hover:bg-red-700 flex items-center space-x-1"
                       onclick="return confirm('Are you sure you want to delete this customer?');">
                        <i class="fas fa-trash"></i> <span>Delete</span>
                    </a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="7" class="text-center py-4 text-gray-500">No customers found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- FontAwesome Icons -->
<script src="https://kit.fontawesome.com/yourkitid.js" crossorigin="anonymous"></script>

{% endblock content %}
